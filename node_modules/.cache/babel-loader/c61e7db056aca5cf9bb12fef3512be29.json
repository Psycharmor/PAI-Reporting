{"ast":null,"code":"import _classCallCheck from \"/Users/delshahab/Github/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/delshahab/Github/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/delshahab/Github/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/delshahab/Github/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/delshahab/Github/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/delshahab/Github/my-app/src/components/LoginForm.js\";\nimport React, { Component } from 'react';\nimport { Form, Button, Alert } from 'react-bootstrap';\nimport axios from \"axios\";\nimport { domain, API, endpoint } from '../config/app.json';\nimport { AUTH_TOKEN } from '../helper';\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginForm, _Component);\n\n  function LoginForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LoginForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      validate: false,\n      loading: false,\n      username: '',\n      password: '',\n      error: ''\n    };\n\n    _this.handleLogin = function (event) {\n      event.preventDefault();\n      var _this$state = _this.state,\n          username = _this$state.username,\n          password = _this$state.password;\n\n      _this.setState({\n        loading: true,\n        validate: true,\n        error: ''\n      });\n\n      axios.post(domain.env.siteUrl + API.WP + API.JWT + endpoint.token, {\n        username: username,\n        password: password\n      }).then(function (user) {\n        return _this.handleLoginSuccess(user.data);\n      }).catch(function (error) {\n        return _this.handleLoginFail(error);\n      });\n    };\n\n    _this.handleLoginSuccess = function (user) {\n      localStorage.setItem(AUTH_TOKEN, JSON.stringify(user));\n      console.log('user', user);\n\n      _this.setState({\n        validate: false,\n        loading: false,\n        username: '',\n        password: '',\n        error: ''\n      });\n\n      _this.props.history.push('/profile');\n    };\n\n    _this.handleLoginFail = function (error) {\n      _this.setState({\n        validate: true,\n        loading: false,\n        error: 'Invalid username / password'\n      });\n    };\n\n    _this.handleUsername = function (username) {\n      _this.setState({\n        username: username\n      });\n    };\n\n    _this.handlePassword = function (password) {\n      _this.setState({\n        password: password\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"renderError\",\n    value: function renderError() {\n      if (this.state.error) {\n        return React.createElement(Alert, {\n          variant: \"danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, this.state.error);\n      } else if (this.state.loading) {\n        return React.createElement(Alert, {\n          variant: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, \"Loading...\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var validate = this.state.validate;\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Form, {\n        method: \"POST\",\n        noValidate: true,\n        validated: validate,\n        onSubmit: this.handleLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"React WordPress JWT Auth\"), React.createElement(Form.Group, {\n        controlId: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Username\"), React.createElement(Form.Control, {\n        type: \"text\",\n        required: true,\n        placeholder: \"Username / Email\",\n        onChange: function onChange(event) {\n          return _this2.handleUsername(event.target.value);\n        },\n        value: this.state.username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(Form.Control.Feedback, {\n        type: \"invalid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Username cannot be empty!\")), React.createElement(Form.Group, {\n        controlId: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Form.Control, {\n        type: \"password\",\n        required: true,\n        placeholder: \"Password\",\n        onChange: function onChange(event) {\n          return _this2.handlePassword(event.target.value);\n        },\n        value: this.state.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(Form.Control.Feedback, {\n        type: \"invalid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Password cannot be empty!\")), this.renderError(), React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Login\")));\n    }\n  }]);\n\n  return LoginForm;\n}(Component);\n\nexport default LoginForm;","map":{"version":3,"sources":["/Users/delshahab/Github/my-app/src/components/LoginForm.js"],"names":["React","Component","Form","Button","Alert","axios","domain","API","endpoint","AUTH_TOKEN","LoginForm","state","validate","loading","username","password","error","handleLogin","event","preventDefault","setState","post","env","siteUrl","WP","JWT","token","then","user","handleLoginSuccess","data","catch","handleLoginFail","localStorage","setItem","JSON","stringify","console","log","props","history","push","handleUsername","handlePassword","target","value","renderError"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Form, Button, Alert } from 'react-bootstrap'\nimport axios from \"axios\";\n\nimport { domain, API, endpoint } from '../config/app.json'\nimport { AUTH_TOKEN } from '../helper';\n\nclass LoginForm extends Component {\n  state = {\n    validate: false,\n    loading: false,\n    username: '',\n    password: '',\n    error: '',\n  }\n\n  handleLogin = event => {\n    event.preventDefault();\n    const { username, password } = this.state;\n    this.setState({ loading: true, validate: true, error: '' });\n    axios.post(domain.env.siteUrl + API.WP + API.JWT + endpoint.token, {\n      username,\n      password\n    })\n    .then(user => this.handleLoginSuccess(user.data))\n    .catch(error => this.handleLoginFail(error))\n  }\n\n  handleLoginSuccess = user => {\n    localStorage.setItem(AUTH_TOKEN, JSON.stringify(user));\n    console.log('user', user)\n    this.setState({\n      validate: false,\n      loading: false,\n      username: '',\n      password: '',\n      error: ''\n    });\n    this.props.history.push('/profile');\n  }\n\n  handleLoginFail = error => {\n    this.setState({ validate: true, loading: false, error: 'Invalid username / password' });\n  }\n\n  handleUsername = username => {\n    this.setState({ username });\n  }\n\n  handlePassword = password => {\n    this.setState({ password });\n  }\n\n  renderError() {\n    if (this.state.error) {\n      return (\n        <Alert variant=\"danger\">\n          {this.state.error}\n        </Alert>\n      )\n    } else if (this.state.loading) {\n      return (\n        <Alert variant=\"primary\">\n          Loading...\n        </Alert>\n      )\n    }\n  }\n\n  render() {\n    const { validate } = this.state;\n    return (\n      <div className=\"container\">\n        <Form\n          method=\"POST\"\n          noValidate\n          validated={validate}\n          onSubmit={this.handleLogin}\n        >\n          <h2>React WordPress JWT Auth</h2>\n          <Form.Group controlId=\"username\">\n            <Form.Label>Username</Form.Label>\n            <Form.Control\n              type=\"text\"\n              required\n              placeholder=\"Username / Email\"\n              onChange={event => this.handleUsername(event.target.value)}\n              value={this.state.username}\n            />\n            <Form.Control.Feedback type=\"invalid\">Username cannot be empty!</Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group controlId=\"password\">\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              required\n              placeholder=\"Password\"\n              onChange={event => this.handlePassword(event.target.value)}\n              value={this.state.password}\n            />\n            <Form.Control.Feedback type=\"invalid\">Password cannot be empty!</Form.Control.Feedback>\n          </Form.Group>\n          {this.renderError()}\n          <Button variant=\"primary\" type=\"submit\">\n            Login\n          </Button>\n        </Form>\n      </div>\n    )\n  }\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}